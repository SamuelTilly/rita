parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"LbTk":[function(require,module,exports) {
function e(e,t,n){e.addEventListener("wheel",t,n)}function t(e,t,n){e.removeEventListener("wheel",t,n)}module.exports=e,module.exports.addWheelListener=e,module.exports.removeWheelListener=t;
},{}],"Cvim":[function(require,module,exports) {
var r=4,n=.001,t=1e-7,u=10,e=11,o=1/(e-1),f="function"==typeof Float32Array;function i(r,n){return 1-3*n+3*r}function a(r,n){return 3*n-6*r}function c(r){return 3*r}function v(r,n,t){return((i(n,t)*r+a(n,t))*r+c(n))*r}function l(r,n,t){return 3*i(n,t)*r*r+2*a(n,t)*r+c(n)}function w(r,n,e,o,f){var i,a,c=0;do{(i=v(a=n+(e-n)/2,o,f)-r)>0?e=a:n=a}while(Math.abs(i)>t&&++c<u);return a}function s(n,t,u,e){for(var o=0;o<r;++o){var f=l(t,u,e);if(0===f)return t;t-=(v(t,u,e)-n)/f}return t}function y(r){return r}module.exports=function(r,t,u,i){if(!(0<=r&&r<=1&&0<=u&&u<=1))throw new Error("bezier x values must be in [0, 1] range");if(r===t&&u===i)return y;for(var a=f?new Float32Array(e):new Array(e),c=0;c<e;++c)a[c]=v(c*o,r,u);return function(f){return 0===f?0:1===f?1:v(function(t){for(var f=0,i=1,c=e-1;i!==c&&a[i]<=t;++i)f+=o;var v=f+(t-a[--i])/(a[i+1]-a[i])*o,y=l(v,r,u);return y>=n?s(t,v,r,u):0===y?v:w(t,f,f+o,r,u)}(f),t,i)}};
},{}],"CU4T":[function(require,module,exports) {
var n=require("bezier-easing"),e={ease:n(.25,.1,.25,1),easeIn:n(.42,0,1,1),easeOut:n(0,0,.58,1),easeInOut:n(.42,0,.58,1),linear:n(0,0,1,1)};function t(n,t,i){var a=Object.create(null),c=Object.create(null),u="function"==typeof(i=i||{}).easing?i.easing:e[i.easing];u||(i.easing&&console.warn("Unknown easing function in amator: "+i.easing),u=e.ease);var f="function"==typeof i.step?i.step:o,s="function"==typeof i.done?i.done:o,l=r(i.scheduler),d=Object.keys(t);d.forEach(function(e){a[e]=n[e],c[e]=t[e]-n[e]});var m,w="number"==typeof i.duration?i.duration:400,p=Math.max(1,.06*w),h=0;return m=l.next(function e(){var t=u(h/p);h+=1;!function(e){d.forEach(function(t){n[t]=c[t]*e+a[t]})}(t);h<=p?(m=l.next(e),f(n)):(m=0,setTimeout(function(){s(n)},0))}),{cancel:function(){l.cancel(m),m=0}}}function o(){}function r(n){if(!n)return"undefined"!=typeof window&&window.requestAnimationFrame?i():a();if("function"!=typeof n.next)throw new Error("Scheduler is supposed to have next(cb) function");if("function"!=typeof n.cancel)throw new Error("Scheduler is supposed to have cancel(handle) function");return n}function i(){return{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}}function a(){return{next:function(n){return setTimeout(n,1e3/60)},cancel:function(n){return clearTimeout(n)}}}function c(){var n=new Set,e=new Set,t=0;return{next:o,cancel:o,clearAll:function(){n.clear(),e.clear(),cancelAnimationFrame(t),t=0}};function o(n){e.add(n),t||(t=requestAnimationFrame(r))}function r(){t=0;var o=e;e=n,(n=o).forEach(function(n){n()}),n.clear()}}module.exports=t,module.exports.makeAggregateRaf=c,module.exports.sharedScheduler=c();
},{"bezier-easing":"Cvim"}],"UU4I":[function(require,module,exports) {
function e(e){var r=Object.create(null);return{on:function(t,n,o){if("function"!=typeof n)throw new Error("callback is expected to be a function");var f=r[t];return f||(f=r[t]=[]),f.push({callback:n,ctx:o}),e},off:function(t,n){if(void 0===t)return r=Object.create(null),e;if(r[t])if("function"!=typeof n)delete r[t];else for(var o=r[t],f=0;f<o.length;++f)o[f].callback===n&&o.splice(f,1);return e},fire:function(t){var n,o=r[t];if(!o)return e;arguments.length>1&&(n=Array.prototype.splice.call(arguments,1));for(var f=0;f<o.length;++f){var c=o[f];c.callback.apply(c.ctx,n)}return e}}}function r(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var r=["on","fire","off"],t=0;t<r.length;++t)if(e.hasOwnProperty(r[t]))throw new Error("Subject cannot be eventified, since it already has property '"+r[t]+"'")}module.exports=function(t){r(t);var n=e(t);return t.on=n.on,t.off=n.off,t.fire=n.fire,t};
},{}],"uaGr":[function(require,module,exports) {
function n(n,o,a){"object"!=typeof a&&(a={});var i,r,u,c,m,f,p,y,l,s,A="number"==typeof a.minVelocity?a.minVelocity:5,F="number"==typeof a.amplitude?a.amplitude:.25,v="function"==typeof a.cancelAnimationFrame?a.cancelAnimationFrame:t(),x="function"==typeof a.requestAnimationFrame?a.requestAnimationFrame:e(),q=342;return{start:function(){i=n(),f=l=c=p=0,r=new Date,v(u),v(s),u=x(w)},stop:function(){v(u),v(s);var t=n();m=t.x,y=t.y,r=Date.now(),(c<-A||c>A)&&(m+=f=F*c);(p<-A||p>A)&&(y+=l=F*p);s=x(D)},cancel:function(){v(u),v(s)}};function w(){var t=Date.now(),e=t-r;r=t;var o=n(),a=o.x-i.x,m=o.y-i.y;i=o;var f=1e3/(1+e);c=.8*a*f+.2*c,p=.8*m*f+.2*p,u=x(w)}function D(){var n=Date.now()-r,t=!1,e=0,a=0;f&&((e=-f*Math.exp(-n/q))>.5||e<-.5?t=!0:e=f=0),l&&((a=-l*Math.exp(-n/q))>.5||a<-.5?t=!0:a=l=0),t&&(o(m+e,y+a),s=x(D))}}function t(){return"function"==typeof cancelAnimationFrame?cancelAnimationFrame:clearTimeout}function e(){return"function"==typeof requestAnimationFrame?requestAnimationFrame:function(n){return setTimeout(n,16)}}module.exports=n;
},{}],"uktf":[function(require,module,exports) {
function t(t){if(t)return{capture:e,release:e};var o,r,a,u=!1;return{capture:function(t){u=!0,r=window.document.onselectstart,a=window.document.ondragstart,window.document.onselectstart=n,(o=t).ondragstart=n},release:function(){if(!u)return;u=!1,window.document.onselectstart=r,o&&(o.ondragstart=a)}}}function n(t){return t.stopPropagation(),!1}function e(){}module.exports=t;
},{}],"JmN3":[function(require,module,exports) {
function s(){this.x=0,this.y=0,this.scale=1}module.exports=s;
},{}],"OLsF":[function(require,module,exports) {
function e(e,r){if(!t(e))throw new Error("svg element is required for svg.panzoom to work");var n=e.ownerSVGElement;if(!n)throw new Error("Do not apply panzoom to the root <svg> element. Use its child instead (e.g. <g></g>). As of March 2016 only FireFox supported transform on the root element");return r.disableKeyboardInteraction||n.setAttribute("tabindex",0),{getBBox:function(){var t=e.getBBox();return{left:t.x,top:t.y,width:t.width,height:t.height}},getScreenCTM:function(){var e=n.getCTM();if(!e)return n.getScreenCTM();return e},getOwner:function(){return n},applyTransform:function(t){e.setAttribute("transform","matrix("+t.scale+" 0 0 "+t.scale+" "+t.x+" "+t.y+")")},initTransform:function(t){var r=e.getCTM();null===r&&(r=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix());t.x=r.e,t.y=r.f,t.scale=r.a,n.removeAttributeNS(null,"viewBox")}}}function t(e){return e&&e.ownerSVGElement&&e.getCTM}module.exports=e,module.exports.canAttach=t;
},{}],"s18e":[function(require,module,exports) {
function t(t,r){if(!e(t))throw new Error("panzoom requires DOM element to be attached to the DOM tree");var n=t.parentElement;return t.scrollTop=0,r.disableKeyboardInteraction||n.setAttribute("tabindex",0),{getBBox:function(){return{left:0,top:0,width:t.clientWidth,height:t.clientHeight}},getOwner:function(){return n},applyTransform:function(e){t.style.transformOrigin="0 0 0",t.style.transform="matrix("+e.scale+", 0, 0, "+e.scale+", "+e.x+", "+e.y+")"}}}function e(t){return t&&t.parentElement&&t.style}module.exports=t,module.exports.canAttach=e;
},{}],"cUtF":[function(require,module,exports) {
"use strict";var e=require("wheel"),t=require("amator"),n=require("ngraph.events"),o=require("./lib/kinetic.js"),r=require("./lib/createTextSelectionInterceptor.js"),i=r(),a=r(!0),c=require("./lib/transform.js"),u=require("./lib/svgController.js"),f=require("./lib/domController.js"),s=1,l=1.75,m=300;function d(r,d){var v=(d=d||{}).controller;if(v||(u.canAttach(r)?v=u(r,d):f.canAttach(r)&&(v=f(r,d))),!v)throw new Error("Cannot create panzoom for the current type of dom element");var g=v.getOwner(),w={x:0,y:0},E=!1,C=new c;v.initTransform&&v.initTransform(C);var S,L="function"==typeof d.filterKey?d.filterKey:p,T="number"==typeof d.pinchSpeed?d.pinchSpeed:1,k=d.bounds,B="number"==typeof d.maxZoom?d.maxZoom:Number.POSITIVE_INFINITY,M="number"==typeof d.minZoom?d.minZoom:0,N="number"==typeof d.boundsPadding?d.boundsPadding:.05,Z="number"==typeof d.zoomDoubleClickSpeed?d.zoomDoubleClickSpeed:l,q=d.beforeWheel||p,z=d.beforeMouseDown||p,D="number"==typeof d.zoomSpeed?d.zoomSpeed:s,j=h(d.transformOrigin),P=d.enableTextSelection?a:i;y(k),d.autocenter&&function(){var e,t,n=0,o=0,r=oe();if(r)n=r.left,o=r.top,e=r.right-r.left,t=r.bottom-r.top;else{var i=g.getBoundingClientRect();e=i.width,t=i.height}var a=v.getBBox();if(0===a.width||0===a.height)return;var c=t/a.height,u=e/a.width,f=Math.min(u,c);C.x=-(a.left+a.width/2)*f+e/2+n,C.y=-(a.top+a.height/2)*f+t/2+o,C.scale=f}();var R,A,I,F,O,Y,X,W,K=0,V=!1,G=!1;O="smoothScroll"in d&&!d.smoothScroll?x():o(function(){return{x:C.x,y:C.y}},function(e,t){Be(),ee(e,t)},d.smoothScroll);var J=!1;ue();var _={dispose:function(){fe()},moveBy:ce,moveTo:ee,smoothMoveTo:function(e,t){ce(e-C.x,t-C.y,!0)},centerOn:function(e){var t=e.ownerSVGElement;if(!t)throw new Error("ui element is required to be within the scene");var n=e.getBoundingClientRect(),o=n.left+n.width/2,r=n.top+n.height/2,i=t.getBoundingClientRect(),a=i.width/2-o,c=i.height/2-r;ce(a,c,!0)},zoomTo:ke,zoomAbs:ae,smoothZoom:Le,smoothZoomAbs:function(e,n,o){var r={scale:C.scale},i={scale:o};O.cancel(),Be(),X=t(r,i,{step:function(t){ae(e,n,t.scale)}})},showRectangle:function(e){var t=g.getBoundingClientRect(),n=$(t.width,t.height),o=e.right-e.left,r=e.bottom-e.top;if(!Number.isFinite(o)||!Number.isFinite(r))throw new Error("Invalid rectangle");var i=n.x/o,a=n.y/r,c=Math.min(i,a);C.x=-(e.left+o/2)*c+n.x/2,C.y=-(e.top+r/2)*c+n.y/2,C.scale=c},pause:function(){fe(),J=!0},resume:function(){J&&(ue(),J=!1)},isPaused:function(){return J},getTransform:function(){return C},getMinZoom:function(){return M},setMinZoom:function(e){M=e},getMaxZoom:function(){return B},setMaxZoom:function(e){B=e},getTransformOrigin:function(){return j},setTransformOrigin:function(e){j=h(e)},getZoomSpeed:function(){return D},setZoomSpeed:function(e){if(!Number.isFinite(e))throw new Error("Zoom speed should be a number");D=e}};n(_);var H="number"==typeof d.initialX?d.initialX:C.x,Q="number"==typeof d.initialY?d.initialY:C.y,U="number"==typeof d.initialZoom?d.initialZoom:C.scale;return H==C.x&&Q==C.y&&U==C.Scale||ae(H,Q,U),_;function $(e,t){if(v.getScreenCTM){var n=v.getScreenCTM(),o=n.a,r=n.d,i=n.e,a=n.f;w.x=e*o-i,w.y=t*r-a}else w.x=e,w.y=t;return w}function ee(e,t){C.x=e,C.y=t,ne(),ze("pan"),re()}function te(e,t){ee(C.x+e,C.y+t)}function ne(){var e=oe();if(e){var t,n,o,r,i=!1,a=(t=v.getBBox(),o=t.left,r=t.top,{left:(n={x:o*C.scale+C.x,y:r*C.scale+C.y}).x,top:n.y,right:t.width*C.scale+n.x,bottom:t.height*C.scale+n.y}),c=e.left-a.right;return c>0&&(C.x+=c,i=!0),(c=e.right-a.left)<0&&(C.x+=c,i=!0),(c=e.top-a.bottom)>0&&(C.y+=c,i=!0),(c=e.bottom-a.top)<0&&(C.y+=c,i=!0),i}}function oe(){if(k){if("boolean"==typeof k){var e=g.getBoundingClientRect(),t=e.width,n=e.height;return{left:t*N,top:n*N,right:t*(1-N),bottom:n*(1-N)}}return k}}function re(){E=!0,S=window.requestAnimationFrame(se)}function ie(e,t,n){if(b(e)||b(t)||b(n))throw new Error("zoom requires valid numbers");var o=C.scale*n;if(o<M){if(C.scale===M)return;n=M/C.scale}if(o>B){if(C.scale===B)return;n=B/C.scale}var r=$(e,t);(C.x=r.x-n*(r.x-C.x),C.y=r.y-n*(r.y-C.y),k&&1===N&&1===M)?(C.scale*=n,ne()):ne()||(C.scale*=n);ze("zoom"),re()}function ae(e,t,n){ie(e,t,n/C.scale)}function ce(e,n,o){if(!o)return te(e,n);Y&&Y.cancel();var r=0,i=0;Y=t({x:0,y:0},{x:e,y:n},{step:function(e){te(e.x-r,e.y-i),r=e.x,i=e.y}})}function ue(){g.addEventListener("mousedown",ge,{passive:!1}),g.addEventListener("dblclick",ye,{passive:!1}),g.addEventListener("touchstart",me,{passive:!1}),g.addEventListener("keydown",le,{passive:!1}),e.addWheelListener(g,Ce,{passive:!1}),re()}function fe(){e.removeWheelListener(g,Ce),g.removeEventListener("mousedown",ge),g.removeEventListener("keydown",le),g.removeEventListener("dblclick",ye),g.removeEventListener("touchstart",me),S&&(window.cancelAnimationFrame(S),S=0),O.cancel(),we(),Ee(),P.release(),Ze()}function se(){E&&(E=!1,v.applyTransform(C),ze("transform"),S=0)}function le(e){var t=0,n=0,o=0;if(38===e.keyCode?n=1:40===e.keyCode?n=-1:37===e.keyCode?t=1:39===e.keyCode?t=-1:189===e.keyCode||109===e.keyCode?o=1:187!==e.keyCode&&107!==e.keyCode||(o=-1),!L(e,t,n,o)){if(t||n){e.preventDefault(),e.stopPropagation();var r=g.getBoundingClientRect();ce(.05*(i=Math.min(r.width,r.height))*t,.05*i*n)}if(o){var i,a=Me(100*o);ke((i=j?Te():{x:(c=g.getBoundingClientRect()).width/2,y:c.height/2}).x,i.y,a)}var c}}function me(e){if(function(e){if(d.onTouch&&!d.onTouch(e))return;e.stopPropagation(),e.preventDefault()}(e),1===e.touches.length)return function(e){var t=Se(e.touches[0]);R=t;var n=$(t.x,t.y);A=n.x,I=n.y,O.cancel(),de()}(e,e.touches[0]);2===e.touches.length&&(F=pe(e.touches[0],e.touches[1]),W=!0,de())}function de(){V||(V=!0,document.addEventListener("touchmove",he),document.addEventListener("touchend",ve),document.addEventListener("touchcancel",ve))}function he(e){if(1===e.touches.length){e.stopPropagation();var t=$((s=Se(e.touches[0])).x,s.y),n=t.x-A,o=t.y-I;0!==n&&0!==o&&Ne(),A=t.x,I=t.y,ce(n,o)}else if(2===e.touches.length){W=!0;var r=e.touches[0],i=e.touches[1],a=pe(r,i),c=1+(a/F-1)*T,u=Se(r),f=Se(i);if(A=(u.x+f.x)/2,I=(u.y+f.y)/2,j){var s=Te();A=s.x,I=s.y}ke(A,I,c),F=a,e.stopPropagation(),e.preventDefault()}}function ve(e){if(e.touches.length>0){var t=$((n=Se(e.touches[0])).x,n.y);A=t.x,I=t.y}else{var n,o=new Date;if(o-K<m)if(j)Le((n=Te()).x,n.y,Z);else Le(R.x,R.y,Z);K=o,Ze(),Ee()}}function pe(e,t){var n=e.clientX-t.clientX,o=e.clientY-t.clientY;return Math.sqrt(n*n+o*o)}function ye(e){!function(e){d.onDoubleClick&&!d.onDoubleClick(e)||(e.preventDefault(),e.stopPropagation())}(e);var t=Se(e);j&&(t=Te()),Le(t.x,t.y,Z)}function ge(e){if(!z(e)){if(V)return e.stopPropagation(),!1;if(1===e.button&&null!==window.event||0===e.button){O.cancel();var t=Se(e),n=$(t.x,t.y);return A=n.x,I=n.y,document.addEventListener("mousemove",be),document.addEventListener("mouseup",xe),P.capture(e.target||e.srcElement),!1}}}function be(e){if(!V){Ne();var t=Se(e),n=$(t.x,t.y),o=n.x-A,r=n.y-I;A=n.x,I=n.y,ce(o,r)}}function xe(){P.release(),Ze(),we()}function we(){document.removeEventListener("mousemove",be),document.removeEventListener("mouseup",xe),G=!1}function Ee(){document.removeEventListener("touchmove",he),document.removeEventListener("touchend",ve),document.removeEventListener("touchcancel",ve),G=!1,W=!1,V=!1}function Ce(e){if(!q(e)){O.cancel();var t=e.deltaY;e.deltaMode>0&&(t*=100);var n=Me(t);if(1!==n){var o=j?Te():Se(e);ke(o.x,o.y,n),e.preventDefault()}}}function Se(e){var t=g.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}function Le(e,n,o){var r=C.scale,i={scale:r},a={scale:o*r};O.cancel(),Be(),X=t(i,a,{step:function(t){ae(e,n,t.scale)},done:qe})}function Te(){var e=g.getBoundingClientRect();return{x:e.width*j.x,y:e.height*j.y}}function ke(e,t,n){return O.cancel(),Be(),ie(e,t,n)}function Be(){X&&(X.cancel(),X=null)}function Me(e){return 1-Math.sign(e)*Math.min(.25,Math.abs(D*e/128))}function Ne(){G||(ze("panstart"),G=!0,O.start())}function Ze(){G&&(W||O.stop(),ze("panend"))}function qe(){ze("zoomend")}function ze(e){_.fire(e,_)}}function h(e){if(e)return"object"==typeof e?(g(e.x)&&g(e.y)||v(e),e):void v()}function v(e){throw console.error(e),new Error(["Cannot parse transform origin.","Some good examples:",'  "center center" can be achieved with {x: 0.5, y: 0.5}','  "top center" can be achieved with {x: 0.5, y: 0}','  "bottom right" can be achieved with {x: 1, y: 1}'].join("\n"))}function p(){}function y(e){var t=typeof e;if("undefined"!==t&&"boolean"!==t&&!(g(e.left)&&g(e.top)&&g(e.bottom)&&g(e.right)))throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}function g(e){return Number.isFinite(e)}function b(e){return Number.isNaN?Number.isNaN(e):e!=e}function x(){return{start:p,stop:p,cancel:p}}function w(){if("undefined"!=typeof document){var e=document.getElementsByTagName("script");if(e){for(var t,n=0;n<e.length;++n){var o=e[n];if(o.src&&o.src.match(/\bpanzoom(\.min)?\.js/)){t=o;break}}if(t){var r=t.getAttribute("query");if(r){var i=t.getAttribute("name")||"pz",a=Date.now();!function e(){var n=document.querySelector(r);if(!n){var o=Date.now(),u=o-a;return u<2e3?void setTimeout(e,100):void console.error("Cannot find the panzoom element",i)}var f=function(e){for(var t=e.attributes,n={},o=0;o<t.length;++o){var r=t[o],i=c(r);i&&(n[i.name]=i.value)}return n}(t);console.log(f);window[i]=d(n,f)}()}}}}function c(e){if(e.name&&("p"===e.name[0]&&"z"===e.name[1]&&"-"===e.name[2]))return{name:e.name.substr(3),value:JSON.parse(e.value)}}}module.exports=d,w();
},{"wheel":"LbTk","amator":"CU4T","ngraph.events":"UU4I","./lib/kinetic.js":"uaGr","./lib/createTextSelectionInterceptor.js":"uktf","./lib/transform.js":"JmN3","./lib/svgController.js":"OLsF","./lib/domController.js":"s18e"}],"ducL":[function(require,module,exports) {
"use strict";function e(){if("ontouchstart"in window||window.TouchEvent)return!0;if(window.DocumentTouch&&document instanceof DocumentTouch)return!0;var e=["","-webkit-","-moz-","-o-","-ms-"].map(function(e){return"(".concat(e,"touch-enabled)")});return window.matchMedia(e.join(",")).matches}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isTouchDevice=e;
},{}],"T4d9":[function(require,module,exports) {
"use strict";function e(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function t(t,r,n){return"#"+e(t)+e(r)+e(n)}function r(e){return parseInt(e.replace("#",""),16)>8388607.5?"black":"white"}Object.defineProperty(exports,"__esModule",{value:!0}),exports.componentToHex=e,exports.rgbToHex=t,exports.getContrast50=r;
},{}],"uIiv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getContext=c,exports.forEachPixel=u,exports.getColorList=l,exports.getEventPosition=f,exports.getColorAtPos=s;var t=require("./color");function e(t,e){return a(t)||i(t,e)||n(t,e)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,e){if(t){if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(u){o=!0,i=u}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}}function a(t){if(Array.isArray(t))return t}function c(t){return document.getElementById(t).getContext("2d")}function u(t,e){for(var r=[],n=t.canvas,o=n.width,i=n.height,a=0;a<o;a++)for(var c=0;c<i;c++){var u=s(t,{x:a,y:c}),l=!r.includes(u);l&&r.push(u),e(a,c,u,r.indexOf(u),l)}}function l(t,e,r){var n={};return u(t,function(t,o,i,a,c){e.beginPath(),e.rect(t*r,o*r,r,r),e.stroke(),e.fillStyle="#000",e.font=.3*r+"px Arial",e.textAlign="center",e.fillText(a+1,t*r+r/2,o*r+r/2+.3*r/2),c?n[i]=1:n[i]+=1}),n}function f(t,e){var r=t.getBoundingClientRect();return{x:(e.changedTouches?e.changedTouches[0].clientX:e.clientX)-r.left,y:(e.changedTouches?e.changedTouches[0].clientY:e.clientY)-r.top}}function s(r,n){var o=n.x,i=n.y,a=e(r.getImageData(o,i,1,1).data,3),c=a[0],u=a[1],l=a[2];return(0,t.rgbToHex)(c,u,l)}
},{"./color":"T4d9"}],"ulKT":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function t(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var n="ascoders-dependency-inject",l="object"===("undefined"==typeof self?"undefined":o(self))&&self.self===self&&self||"object"===(void 0===e?"undefined":o(e))&&e.global===e&&e,f=function e(){t(this,e),this.instances=new WeakMap,this.injectSymbol=Symbol()},s=new f;exports.globalState=s,l[n]?exports.globalState=s=l[n]:l[n]=s;
},{}],"JDey":[function(require,module,exports) {
"use strict";var t=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(u){a=!0,o=u}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./utils"),a=function(){function a(){r(this,a)}return e(a,[{key:"set",value:function(t,e){n.globalState.instances.has(t)||n.globalState.instances.set(t,e)}},{key:"get",value:function(e){if(!n.globalState.instances.has(e))throw new Error(e.name+" 未注册。先使用 set 方法注册，再使用 get 获取");var r=n.globalState.instances.get(e);if(!r[n.globalState.injectSymbol])return r;var a=!0,o=!1,i=void 0;try{for(var l,u=function(){var e=t(l.value,2),a=e[0],o=e[1];Object.defineProperty(r,a,{enumerable:!0,configurable:!0,get:function(){return n.globalState.instances.get(o)},set:function(t){r.propertyKey=t}})},c=r[n.globalState.injectSymbol][Symbol.iterator]();!(a=(l=c.next()).done);a=!0)u()}catch(f){o=!0,i=f}finally{try{!a&&c.return&&c.return()}finally{if(o)throw i}}return r}}]),a}();exports.default=a;
},{"./utils":"ulKT"}],"Q8x1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./utils");exports.default=function(t){return function(l,r,a){a&&(a.enumerable=!0,a.configurable=!0,a.writable=!0),l[e.globalState.injectSymbol]||Object.defineProperty(l,e.globalState.injectSymbol,{enumerable:!0,configurable:!0,value:new Map}),l[e.globalState.injectSymbol].set(r,t)}};
},{"./utils":"ulKT"}],"Eypa":[function(require,module,exports) {
"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./container");function o(t,r){Object.keys(r).forEach(function(n){if("object"===e(r[n]))o(t,r[n]);else{var c=new r[n];t.set(r[n],c)}})}function r(n){var c=new t.default;return o(c,n),Object.keys(n).reduce(function(t,o){return"object"===e(n[o])?t[o]=r(n[o]):t[o]=c.get(n[o]),t},{})}exports.injectFactory=r;
},{"./container":"JDey"}],"wFOm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./container");exports.Container=e.default;var r=require("./decorators");exports.inject=r.default;var t=require("./helper");exports.injectFactory=t.injectFactory;
},{"./container":"JDey","./decorators":"Q8x1","./helper":"Eypa"}],"kvRt":[function(require,module,exports) {
function e(e){return e&&e.__esModule?e:{default:e}}module.exports=e;
},{}],"ZBnv":[function(require,module,exports) {
function n(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}module.exports=n;
},{}],"NoOd":[function(require,module,exports) {
function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}module.exports=r;
},{}],"LNzP":[function(require,module,exports) {
function o(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?module.exports=o=function(o){return typeof o}:module.exports=o=function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},o(t)}module.exports=o;
},{}],"j0dH":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault"),t=e(require("@babel/runtime/helpers/classCallCheck")),n=e(require("@babel/runtime/helpers/createClass"));Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function e(){(0,t.default)(this,e),this.events=new Map}return(0,n.default)(e,[{key:"on",value:function(e,t){var n={callback:t};this.events.get(e)?this.events.get(e).push(n):this.events.set(e,[n])}},{key:"off",value:function(e,t){if(!this.events.get(e))return!1;var n=this.events.get(e).filter(function(e){return e.callback!==t});return this.events.set(e,n),!0}},{key:"emit",value:function(e,t){return!(!e||!this.events.get(e))&&(this.events.get(e).forEach(function(e){e.callback(t)}),!0)}}]),e}();exports.Event=r;
},{"@babel/runtime/helpers/interopRequireDefault":"kvRt","@babel/runtime/helpers/classCallCheck":"ZBnv","@babel/runtime/helpers/createClass":"NoOd"}],"FNcV":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],t=require("@babel/runtime/helpers/interopRequireDefault"),n=t(require("@babel/runtime/helpers/classCallCheck")),i=t(require("@babel/runtime/helpers/typeof"));Object.defineProperty(exports,"__esModule",{value:!0});var s=require("./event"),a="ascoders-dob",u="object"===("undefined"==typeof self?"undefined":(0,i.default)(self))&&self.self===self&&self||"object"===(void 0===e?"undefined":(0,i.default)(e))&&e.global===e&&e,r=function e(){(0,n.default)(this,e),this.proxies=new WeakMap,this.originObjects=new WeakMap,this.objectReactionBindings=new WeakMap,this.currentReaction=null,this.batchDeep=0,this.pendingReactions=new Set,this.ignoreDynamicSymbol=Symbol(),this.pendingTracks=new Set,this.useDebug=!1,this.currentDebugOutputAction=null,this.debugOutputActionMapBatchDeep=new Map,this.parentInfo=new WeakMap,this.currentDebugName=null,this.currentDebugId=null,this.strictMode=!1,this.event=new s.Event,this.uniqueIdCounter=0,this.getCallstackMaxCount=50},l=new r;exports.globalState=l,u[a]?exports.globalState=l=u[a]:u[a]=l;
},{"@babel/runtime/helpers/interopRequireDefault":"kvRt","@babel/runtime/helpers/classCallCheck":"ZBnv","@babel/runtime/helpers/typeof":"LNzP","./event":"j0dH"}],"Jibl":[function(require,module,exports) {
function t(o,e){return module.exports=t=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},t(o,e)}module.exports=t;
},{}],"v5KI":[function(require,module,exports) {
function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}module.exports=t;
},{}],"XsAw":[function(require,module,exports) {
var e=require("./setPrototypeOf"),t=require("./isNativeReflectConstruct");function r(o,u,n){return t()?module.exports=r=Reflect.construct:module.exports=r=function(t,r,o){var u=[null];u.push.apply(u,r);var n=new(Function.bind.apply(t,u));return o&&e(n,o.prototype),n},r.apply(null,arguments)}module.exports=r;
},{"./setPrototypeOf":"Jibl","./isNativeReflectConstruct":"v5KI"}],"nrZX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../global-state"),e=Map.prototype,r=Symbol("Map master key"),a=["has","get"],i=["forEach","keys","values","entries",Symbol.iterator],n=["set","delete","clear"].concat(a,i);function l(l,o,s,u){l.$raw={};var h=!0,c=!1,f=void 0;try{for(var y,p=function(){var t=y.value;l.$raw[t]=function(){e[t].apply(l,arguments)}},v=n[Symbol.iterator]();!(h=(y=v.next()).done);h=!0)p()}catch(S){c=!0,f=S}finally{try{h||null==v.return||v.return()}finally{if(c)throw f}}for(var g=function(){var r=a[d];l[r]=function(a){var i=e[r].apply(this,arguments);return t.globalState.event.emit("get",{target:l,key:a,value:i}),i=u(this,a,i),o(this,a),i}},d=0;d<a.length;d++)g();for(var b=function(){var t=i[m];l[t]=function(){return o(this,r),e[t].apply(this,arguments)}},m=0;m<i.length;m++)b();return l.set=function(a,i){var n=this.get(a),o=e.set.apply(this,arguments);return t.globalState.event.emit("set",{target:l,key:a,oldValue:n,value:i}),n!==i&&(s(this,a),s(this,r)),o},l.delete=function(a){var i=this.has(a),n=e.delete.apply(this,arguments);return t.globalState.event.emit("deleteProperty",{target:l,key:a}),i&&(s(this,a),s(this,r)),n},l.clear=function(){var t=this.size,a=e.clear.apply(this,arguments);return t&&s(this,r),a},Object.defineProperty(l,"size",{get:function(){var t=Object.getPrototypeOf(this),e=Reflect.get(t,"size",this);return o(this,r),e}}),l}exports.default=l;
},{"../global-state":"FNcV"}],"lUfX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../global-state"),e=Set.prototype,r=Symbol("Set master value"),a=["has"],l=["forEach","keys","values","entries",Symbol.iterator],n=["add","delete","clear"].concat(a,l);function i(i,o,s,u){i.$raw={};var h=!0,c=!1,f=void 0;try{for(var v,y=function(){var t=v.value;i.$raw[t]=function(){e[t].apply(i,arguments)}},p=n[Symbol.iterator]();!(h=(v=p.next()).done);h=!0)y()}catch(m){c=!0,f=m}finally{try{h||null==p.return||p.return()}finally{if(c)throw f}}for(var d=function(){var r=a[g];i[r]=function(a){var l=e[r].apply(this,arguments);return t.globalState.event.emit("get",{target:i,key:null,value:l}),l=u(this,a,l),o(this,a),l}},g=0;g<a.length;g++)d();for(var b=function(){var t=l[S];i[t]=function(){return o(this,r),e[t].apply(this,arguments)}},S=0;S<l.length;S++)b();return i.add=function(a){var l=this.has(a),n=e.add.apply(this,arguments);return t.globalState.event.emit("set",{target:i,key:null,value:a,oldValue:null}),l||(s(this,a),s(this,r)),n},i.delete=function(a){var l=this.has(a),n=e.delete.apply(this,arguments);return t.globalState.event.emit("deleteProperty",{target:i,key:null}),l&&(s(this,a),s(this,r)),n},i.clear=function(){var t=this.size,a=e.clear.apply(this,arguments);return t&&s(this,r),a},Object.defineProperty(i,"size",{get:function(){var t=Object.getPrototypeOf(this),e=Reflect.get(t,"size",this);return o(this,r),e}}),i}exports.default=i;
},{"../global-state":"FNcV"}],"wanV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../global-state"),e=WeakMap.prototype,r=["has","get"],a=["set","delete"].concat(r);function l(l,n,i,o){l.$raw={};var u=!0,s=!1,v=void 0;try{for(var p,y=function(){var t=p.value;l.$raw[t]=function(){e[t].apply(l,arguments)}},f=a[Symbol.iterator]();!(u=(p=f.next()).done);u=!0)y()}catch(g){s=!0,v=g}finally{try{u||null==f.return||f.return()}finally{if(s)throw v}}for(var h=function(){var a=r[c];l[a]=function(r){var i=e[a].apply(this,arguments);return t.globalState.event.emit("get",{target:l,key:null,value:i}),i=o(this,r,i),n(this,r),i}},c=0;c<r.length;c++)h();return l.set=function(r,a){var n=this.get(r),o=e.set.apply(this,arguments);return t.globalState.event.emit("set",{target:l,key:r,oldValue:n,value:a}),n!==a&&i(this,r),o},l.delete=function(r){var a=this.has(r),n=e.delete.apply(this,arguments);return t.globalState.event.emit("deleteProperty",{target:l,key:r}),a&&i(this,r),n},l}exports.default=l;
},{"../global-state":"FNcV"}],"zTqE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../global-state"),e=WeakSet.prototype,a=["has"],r=["add","delete"].concat(a);function l(l,n,i,o){l.$raw={};var u=!0,s=!1,v=void 0;try{for(var d,h=function(){var t=d.value;l.$raw[t]=function(){e[t].apply(l,arguments)}},y=r[Symbol.iterator]();!(u=(d=y.next()).done);u=!0)h()}catch(c){s=!0,v=c}finally{try{u||null==y.return||y.return()}finally{if(s)throw v}}for(var f=function(){var r=a[p];l[r]=function(a){var i=e[r].apply(this,arguments);return t.globalState.event.emit("get",{target:l,key:null,value:i}),i=o(this,a,i),n(this,a),i}},p=0;p<a.length;p++)f();return l.add=function(a){var r=this.has(a),n=e.add.apply(this,arguments);return t.globalState.event.emit("set",{target:l,key:null,value:a,oldValue:null}),r||i(this,a),n},l.delete=function(a){var r=this.has(a),n=e.delete.apply(this,arguments);return t.globalState.event.emit("deleteProperty",{target:l,key:null}),r&&i(this,a),n},l}exports.default=l;
},{"../global-state":"FNcV"}],"TDyn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./map"),a=require("./set"),t=require("./weak-map"),r=require("./weak-set");exports.default=new Map([[Map,e.default],[Set,a.default],[WeakMap,t.default],[WeakSet,r.default],[Date,!0],[RegExp,!0]]);
},{"./map":"nrZX","./set":"lUfX","./weak-map":"wanV","./weak-set":"zTqE"}],"KpaV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./global-state");function e(t){return null==t||("string"==typeof t||"number"==typeof t||"boolean"==typeof t||t instanceof Date)}function n(){return 0!==t.globalState.batchDeep}function o(){return!!t.globalState.currentReaction}function r(e,n){var o=t.globalState.objectReactionBindings.get(e);o||(o=new Map,t.globalState.objectReactionBindings.set(e,o));var r=o.get(n);return r||(r=new Set,o.set(n,r)),{binder:o,keyBinder:r}}function i(){t.globalState.useDebug=!0}function a(){t.globalState.useDebug=!1}function u(){t.globalState.strictMode=!0}function c(){t.globalState.strictMode=!1}function s(){return t.globalState.uniqueIdCounter++}exports.isPrimitive=e,exports.noop=function(){},exports.inAction=n,exports.inTrack=o,exports.getBinder=r,exports.startDebug=i,exports.stopDebug=a,exports.useStrict=u,exports.cancelStrict=c,exports.createUniqueId=s;
},{"./global-state":"FNcV"}],"itUD":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault"),a=e(require("@babel/runtime/helpers/classCallCheck")),t=e(require("@babel/runtime/helpers/createClass"));Object.defineProperty(exports,"__esModule",{value:!0});var i=require("./global-state"),l=require("./utils"),r=function(){function e(t,i,l){(0,a.default)(this,e),this.delay=null,this.keyBinders=new Set,this.name=t,this.callback=i,this.delay=l||null}return(0,t.default)(e,[{key:"track",value:function(e){if(e)if(l.inTrack())i.globalState.pendingTracks.add(this.track.bind(this,e));else{i.globalState.currentReaction=this,this.clearBinding();try{e({debugId:i.globalState.currentDebugId})}finally{i.globalState.currentReaction=null}var a=0,t=Array.from(i.globalState.pendingTracks);i.globalState.pendingTracks.clear(),t.forEach(function(e){if(++a>=1e3)return console.warn("The number of executions reaches the upper limit, there may be a dead cycle."),void i.globalState.pendingTracks.clear();e()})}}},{key:"dispose",value:function(){this.clearBinding(),this.callback=null}},{key:"run",value:function(){this.callback&&this.callback()}},{key:"addBinder",value:function(e){this.keyBinders.add(e)}},{key:"clearBinding",value:function(){var e=this;this.keyBinders.forEach(function(a){a.delete(e)}),this.keyBinders.clear()}}]),e}();exports.Reaction=r;
},{"@babel/runtime/helpers/interopRequireDefault":"kvRt","@babel/runtime/helpers/classCallCheck":"ZBnv","@babel/runtime/helpers/createClass":"NoOd","./global-state":"FNcV","./utils":"KpaV"}],"mhC7":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault"),t=e(require("@babel/runtime/helpers/typeof")),n=e(require("@babel/runtime/helpers/construct"));Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./built-ins"),a=require("./global-state"),o=require("./reaction"),i=require("./utils"),l=1e3;function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i.isPrimitive(e))throw TypeError("dob not support ".concat(e,", because it is a basic type."));return a.globalState.proxies.has(e)?a.globalState.proxies.get(e):b(e)}function u(e){return function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return c((0,n.default)(e,r))}}function b(e){if(Object.getOwnPropertySymbols(e).indexOf(a.globalState.ignoreDynamicSymbol)>-1)return e;var n,o=r.default.get(e.constructor);return n="function"==typeof o||"object"===(0,t.default)(o)?o(e,p,g,s):o?e:new Proxy(e,{get:function(e,t,n){var r=Reflect.get(e,t,n);return"$raw"===t?e:(a.globalState.event.emit("get",{target:e,key:t,value:r}),p(e,t),r=s(e,t,r))},set:function(e,n,r,o){var i=Reflect.get(e,n,o);"object"===(0,t.default)(r)&&r&&(r=r.$raw||r),a.globalState.event.emit("set",{target:e,key:n,value:r,oldValue:i});var l=Reflect.set(e,n,r,o);return"length"!==n&&r===i||g(e,n),l},deleteProperty:function(e,t){var n=Reflect.has(e,t);a.globalState.event.emit("deleteProperty",{target:e,key:t});var r=Reflect.deleteProperty(e,t);return n&&g(e,t),r}}),a.globalState.proxies.set(e,n),a.globalState.proxies.set(n,n),a.globalState.originObjects.set(n,e),a.globalState.objectReactionBindings.set(e,new Map),n}function s(e,n,r){if("undefined"!=typeof window&&r instanceof HTMLElement)return r;var o="object"===(0,t.default)(r)&&r,i=o&&a.globalState.proxies.get(r);return o?i||b(r):r}function g(e,t){if(a.globalState.strictMode&&0===a.globalState.batchDeep)throw Error("You are not allowed to modify observable value out of Action.");var n=i.getBinder(e,t).keyBinder;Array.from(n).forEach(function(e){i.inAction()?a.globalState.pendingReactions.add(e):0===a.globalState.pendingReactions.size?f(e):(a.globalState.pendingReactions.add(e),d())})}function f(e){e.run()}function d(){var e=0;a.globalState.pendingReactions.forEach(function(t){++e>=l?a.globalState.pendingReactions.clear():f(t)}),a.globalState.pendingReactions.clear()}function p(e,t){if(a.globalState.currentReaction&&!i.inAction()){var n=i.getBinder(e,t).keyBinder;n.has(a.globalState.currentReaction)||(n.add(a.globalState.currentReaction),a.globalState.currentReaction.addBinder(n))}}function v(e){return a.globalState.proxies.get(e)===e}function S(e,t){var n=new o.Reaction("observe",function(){n.track(e)},t);return i.inAction()?a.globalState.pendingReactions.add(n):n.run(),{unobserve:function(){n.dispose()}}}function y(){0===a.globalState.batchDeep&&(a.globalState.pendingReactions=new Set),a.globalState.batchDeep++,a.globalState.event.emit("startBatch",null)}function h(){0==--a.globalState.batchDeep&&d(),a.globalState.event.emit("endBatch",null)}function R(e,t,n){return void 0===t?x.call(null,e,e.name):m.call(null,e,e.constructor.name+"."+t,n)}function m(e,t,n){var r=n.value;return{get:function(){var e=this;return function(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return x(r.bind.apply(r,[e].concat(a)),t)}}}}function x(e,t){a.globalState.event.emit("runInAction",t),y();try{return e()}finally{h()}}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"==typeof e?u(e):c(e)}function B(e){return Object.defineProperty(e,a.globalState.ignoreDynamicSymbol,{value:!0}),e}exports.runReaction=f,exports.isObservable=v,exports.observe=S,exports.startBatch=y,exports.endBatch=h,exports.Action=R,exports.observable=w,exports.Static=B;
},{"@babel/runtime/helpers/interopRequireDefault":"kvRt","@babel/runtime/helpers/typeof":"LNzP","@babel/runtime/helpers/construct":"XsAw","./built-ins":"TDyn","./global-state":"FNcV","./reaction":"itUD","./utils":"KpaV"}],"DBzx":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault"),r=e(require("@babel/runtime/helpers/classCallCheck")),t=e(require("@babel/runtime/helpers/createClass"));Object.defineProperty(exports,"__esModule",{value:!0});var i=require("./global-state"),n=require("./observer"),a=require("./utils"),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.noop,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.noop;(0,r.default)(this,e),this.reactions=new Set,this.isBeingTracked=!1,this.onBecomeObservedHandler=t,this.onBecomeUnobservedHandler=i}return(0,t.default)(e,[{key:"reportObserved",value:function(){n.startBatch(),i.globalState.currentReaction&&this.reactions.add(i.globalState.currentReaction),this.isBeingTracked||(this.isBeingTracked=!0,this.onBecomeObservedHandler()),n.endBatch()}},{key:"reportChanged",value:function(){this.reactions.forEach(function(e){n.runReaction(e)})}},{key:"unobserve",value:function(){this.isBeingTracked=!1,this.reactions.clear(),this.onBecomeUnobservedHandler()}}]),e}();exports.Atom=o;
},{"@babel/runtime/helpers/interopRequireDefault":"kvRt","@babel/runtime/helpers/classCallCheck":"ZBnv","@babel/runtime/helpers/createClass":"NoOd","./global-state":"FNcV","./observer":"mhC7","./utils":"KpaV"}],"MkA0":[function(require,module,exports) {
var global = arguments[3];

var t=arguments[3],r=200,e="__lodash_hash_undefined__",n=9007199254740991,o="[object Arguments]",u="[object Array]",c="[object Boolean]",a="[object Date]",i="[object Error]",f="[object Function]",s="[object GeneratorFunction]",l="[object Map]",p="[object Number]",_="[object Object]",h="[object Promise]",y="[object RegExp]",v="[object Set]",b="[object String]",d="[object Symbol]",j="[object WeakMap]",g="[object ArrayBuffer]",w="[object DataView]",O="[object Float32Array]",m="[object Float64Array]",A="[object Int8Array]",x="[object Int16Array]",S="[object Int32Array]",$="[object Uint8Array]",E="[object Uint8ClampedArray]",I="[object Uint16Array]",P="[object Uint32Array]",F=/[\\^$.*+?()[\]{}|]/g,k=/\w*$/,B=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,M={};M[o]=M[u]=M[g]=M[w]=M[c]=M[a]=M[O]=M[m]=M[A]=M[x]=M[S]=M[l]=M[p]=M[_]=M[y]=M[v]=M[b]=M[d]=M[$]=M[E]=M[I]=M[P]=!0,M[i]=M[f]=M[j]=!1;var D="object"==typeof t&&t&&t.Object===Object&&t,R="object"==typeof self&&self&&self.Object===Object&&self,T=D||R||Function("return this")(),z="object"==typeof exports&&exports&&!exports.nodeType&&exports,C=z&&"object"==typeof module&&module&&!module.nodeType&&module,L=C&&C.exports===z;function V(t,r){return t.set(r[0],r[1]),t}function W(t,r){return t.add(r),t}function G(t,r){for(var e=-1,n=t?t.length:0;++e<n&&!1!==r(t[e],e,t););return t}function N(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t}function q(t,r,e,n){var o=-1,u=t?t.length:0;for(n&&u&&(e=t[++o]);++o<u;)e=r(e,t[o],o,t);return e}function H(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}function J(t,r){return null==t?void 0:t[r]}function K(t){var r=!1;if(null!=t&&"function"!=typeof t.toString)try{r=!!(t+"")}catch(e){}return r}function Q(t){var r=-1,e=Array(t.size);return t.forEach(function(t,n){e[++r]=[n,t]}),e}function X(t,r){return function(e){return t(r(e))}}function Y(t){var r=-1,e=Array(t.size);return t.forEach(function(t){e[++r]=t}),e}var Z=Array.prototype,tt=Function.prototype,rt=Object.prototype,et=T["__core-js_shared__"],nt=function(){var t=/[^.]+$/.exec(et&&et.keys&&et.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ot=tt.toString,ut=rt.hasOwnProperty,ct=rt.toString,at=RegExp("^"+ot.call(ut).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),it=L?T.Buffer:void 0,ft=T.Symbol,st=T.Uint8Array,lt=X(Object.getPrototypeOf,Object),pt=Object.create,_t=rt.propertyIsEnumerable,ht=Z.splice,yt=Object.getOwnPropertySymbols,vt=it?it.isBuffer:void 0,bt=X(Object.keys,Object),dt=Ar(T,"DataView"),jt=Ar(T,"Map"),gt=Ar(T,"Promise"),wt=Ar(T,"Set"),Ot=Ar(T,"WeakMap"),mt=Ar(Object,"create"),At=Ur(dt),xt=Ur(jt),St=Ur(gt),$t=Ur(wt),Et=Ur(Ot),It=ft?ft.prototype:void 0,Pt=It?It.valueOf:void 0;function Ft(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function kt(){this.__data__=mt?mt(null):{}}function Bt(t){return this.has(t)&&delete this.__data__[t]}function Ut(t){var r=this.__data__;if(mt){var n=r[t];return n===e?void 0:n}return ut.call(r,t)?r[t]:void 0}function Mt(t){var r=this.__data__;return mt?void 0!==r[t]:ut.call(r,t)}function Dt(t,r){return this.__data__[t]=mt&&void 0===r?e:r,this}function Rt(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function Tt(){this.__data__=[]}function zt(t){var r=this.__data__,e=nr(r,t);return!(e<0)&&(e==r.length-1?r.pop():ht.call(r,e,1),!0)}function Ct(t){var r=this.__data__,e=nr(r,t);return e<0?void 0:r[e][1]}function Lt(t){return nr(this.__data__,t)>-1}function Vt(t,r){var e=this.__data__,n=nr(e,t);return n<0?e.push([t,r]):e[n][1]=r,this}function Wt(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function Gt(){this.__data__={hash:new Ft,map:new(jt||Rt),string:new Ft}}function Nt(t){return mr(this,t).delete(t)}function qt(t){return mr(this,t).get(t)}function Ht(t){return mr(this,t).has(t)}function Jt(t,r){return mr(this,t).set(t,r),this}function Kt(t){this.__data__=new Rt(t)}function Qt(){this.__data__=new Rt}function Xt(t){return this.__data__.delete(t)}function Yt(t){return this.__data__.get(t)}function Zt(t){return this.__data__.has(t)}function tr(t,e){var n=this.__data__;if(n instanceof Rt){var o=n.__data__;if(!jt||o.length<r-1)return o.push([t,e]),this;n=this.__data__=new Wt(o)}return n.set(t,e),this}function rr(t,r){var e=Tr(t)||Rr(t)?H(t.length,String):[],n=e.length,o=!!n;for(var u in t)!r&&!ut.call(t,u)||o&&("length"==u||Pr(u,n))||e.push(u);return e}function er(t,r,e){var n=t[r];ut.call(t,r)&&Dr(n,e)&&(void 0!==e||r in t)||(t[r]=e)}function nr(t,r){for(var e=t.length;e--;)if(Dr(t[e][0],r))return e;return-1}function or(t,r){return t&&gr(r,qr(r),t)}function ur(t,r,e,n,u,c,a){var i;if(n&&(i=c?n(t,u,c,a):n(t)),void 0!==i)return i;if(!Gr(t))return t;var l=Tr(t);if(l){if(i=$r(t),!r)return jr(t,i)}else{var p=Sr(t),h=p==f||p==s;if(Lr(t))return lr(t,r);if(p==_||p==o||h&&!c){if(K(t))return c?t:{};if(i=Er(h?{}:t),!r)return wr(t,or(i,t))}else{if(!M[p])return c?t:{};i=Ir(t,p,ur,r)}}a||(a=new Kt);var y=a.get(t);if(y)return y;if(a.set(t,i),!l)var v=e?Or(t):qr(t);return G(v||t,function(o,u){v&&(o=t[u=o]),er(i,u,ur(o,r,e,n,u,t,a))}),i}function cr(t){return Gr(t)?pt(t):{}}function ar(t,r,e){var n=r(t);return Tr(t)?n:N(n,e(t))}function ir(t){return ct.call(t)}function fr(t){return!(!Gr(t)||kr(t))&&(Vr(t)||K(t)?at:B).test(Ur(t))}function sr(t){if(!Br(t))return bt(t);var r=[];for(var e in Object(t))ut.call(t,e)&&"constructor"!=e&&r.push(e);return r}function lr(t,r){if(r)return t.slice();var e=new t.constructor(t.length);return t.copy(e),e}function pr(t){var r=new t.constructor(t.byteLength);return new st(r).set(new st(t)),r}function _r(t,r){var e=r?pr(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}function hr(t,r,e){return q(r?e(Q(t),!0):Q(t),V,new t.constructor)}function yr(t){var r=new t.constructor(t.source,k.exec(t));return r.lastIndex=t.lastIndex,r}function vr(t,r,e){return q(r?e(Y(t),!0):Y(t),W,new t.constructor)}function br(t){return Pt?Object(Pt.call(t)):{}}function dr(t,r){var e=r?pr(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function jr(t,r){var e=-1,n=t.length;for(r||(r=Array(n));++e<n;)r[e]=t[e];return r}function gr(t,r,e,n){e||(e={});for(var o=-1,u=r.length;++o<u;){var c=r[o],a=n?n(e[c],t[c],c,e,t):void 0;er(e,c,void 0===a?t[c]:a)}return e}function wr(t,r){return gr(t,xr(t),r)}function Or(t){return ar(t,qr,xr)}function mr(t,r){var e=t.__data__;return Fr(r)?e["string"==typeof r?"string":"hash"]:e.map}function Ar(t,r){var e=J(t,r);return fr(e)?e:void 0}Ft.prototype.clear=kt,Ft.prototype.delete=Bt,Ft.prototype.get=Ut,Ft.prototype.has=Mt,Ft.prototype.set=Dt,Rt.prototype.clear=Tt,Rt.prototype.delete=zt,Rt.prototype.get=Ct,Rt.prototype.has=Lt,Rt.prototype.set=Vt,Wt.prototype.clear=Gt,Wt.prototype.delete=Nt,Wt.prototype.get=qt,Wt.prototype.has=Ht,Wt.prototype.set=Jt,Kt.prototype.clear=Qt,Kt.prototype.delete=Xt,Kt.prototype.get=Yt,Kt.prototype.has=Zt,Kt.prototype.set=tr;var xr=yt?X(yt,Object):Hr,Sr=ir;function $r(t){var r=t.length,e=t.constructor(r);return r&&"string"==typeof t[0]&&ut.call(t,"index")&&(e.index=t.index,e.input=t.input),e}function Er(t){return"function"!=typeof t.constructor||Br(t)?{}:cr(lt(t))}function Ir(t,r,e,n){var o=t.constructor;switch(r){case g:return pr(t);case c:case a:return new o(+t);case w:return _r(t,n);case O:case m:case A:case x:case S:case $:case E:case I:case P:return dr(t,n);case l:return hr(t,n,e);case p:case b:return new o(t);case y:return yr(t);case v:return vr(t,n,e);case d:return br(t)}}function Pr(t,r){return!!(r=null==r?n:r)&&("number"==typeof t||U.test(t))&&t>-1&&t%1==0&&t<r}function Fr(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t}function kr(t){return!!nt&&nt in t}function Br(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||rt)}function Ur(t){if(null!=t){try{return ot.call(t)}catch(r){}try{return t+""}catch(r){}}return""}function Mr(t){return ur(t,!0,!0)}function Dr(t,r){return t===r||t!=t&&r!=r}function Rr(t){return Cr(t)&&ut.call(t,"callee")&&(!_t.call(t,"callee")||ct.call(t)==o)}(dt&&Sr(new dt(new ArrayBuffer(1)))!=w||jt&&Sr(new jt)!=l||gt&&Sr(gt.resolve())!=h||wt&&Sr(new wt)!=v||Ot&&Sr(new Ot)!=j)&&(Sr=function(t){var r=ct.call(t),e=r==_?t.constructor:void 0,n=e?Ur(e):void 0;if(n)switch(n){case At:return w;case xt:return l;case St:return h;case $t:return v;case Et:return j}return r});var Tr=Array.isArray;function zr(t){return null!=t&&Wr(t.length)&&!Vr(t)}function Cr(t){return Nr(t)&&zr(t)}var Lr=vt||Jr;function Vr(t){var r=Gr(t)?ct.call(t):"";return r==f||r==s}function Wr(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}function Gr(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function Nr(t){return!!t&&"object"==typeof t}function qr(t){return zr(t)?rr(t):sr(t)}function Hr(){return[]}function Jr(){return!1}module.exports=Mr;
},{}],"KvOL":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault"),t=e(require("@babel/runtime/helpers/typeof"));Object.defineProperty(exports,"__esModule",{value:!0});var a=require("./global-state"),l=require("./utils"),u=require("lodash.clonedeep");function n(e){a.globalState.currentDebugOutputAction?a.globalState.currentDebugOutputAction.changeList.push(e):a.globalState.event.emit("debug",{id:l.createUniqueId(),name:null,changeList:[e],type:"isolated"})}function o(e){var t=[];if(a.globalState.parentInfo.has(e))for(var l=e,u=0;a.globalState.parentInfo.has(l);){var n=a.globalState.parentInfo.get(l);if(t.unshift(n.key),a.globalState.parentInfo.has(n.parent)||t.unshift(n.parent.constructor.name),l=n.parent,++u>=a.globalState.getCallstackMaxCount)break}else t.unshift(e.constructor.name);return t}a.globalState.event.on("get",function(e){a.globalState.useDebug&&null!==e.value&&"object"===(0,t.default)(e.value)&&a.globalState.parentInfo.set(e.value,{parent:e.target,key:e.key})}),a.globalState.event.on("runInAction",function(e){a.globalState.useDebug&&(a.globalState.currentDebugName=e||null)}),a.globalState.event.on("startBatch",function(){if(a.globalState.useDebug){var e={name:a.globalState.currentDebugName,changeList:[],type:"action"};a.globalState.debugOutputActionMapBatchDeep.set(a.globalState.batchDeep,e),a.globalState.currentDebugOutputAction=e,1===a.globalState.batchDeep&&(e.id=l.createUniqueId(),a.globalState.currentDebugId=e.id),a.globalState.batchDeep>1&&a.globalState.debugOutputActionMapBatchDeep.get(a.globalState.batchDeep-1).changeList.push({type:"action",action:e})}}),a.globalState.event.on("endBatch",function(){if(a.globalState.useDebug&&(a.globalState.currentDebugOutputAction=a.globalState.debugOutputActionMapBatchDeep.get(a.globalState.batchDeep)||null,!l.inAction())){var e=null;try{e=JSON.parse(JSON.stringify(a.globalState.debugOutputActionMapBatchDeep.get(1)))}catch(t){return}a.globalState.event.emit("debug",e),a.globalState.currentDebugOutputAction=null,a.globalState.debugOutputActionMapBatchDeep.clear()}}),a.globalState.event.on("set",function(e){a.globalState.useDebug&&n({type:"change",callStack:o(e.target),oldValue:u(e.oldValue),key:e.key,value:u(e.value)})}),a.globalState.event.on("deleteProperty",function(e){a.globalState.useDebug&&n({type:"delete",callStack:o(e.target),key:e.key})});
},{"@babel/runtime/helpers/interopRequireDefault":"kvRt","@babel/runtime/helpers/typeof":"LNzP","./global-state":"FNcV","./utils":"KpaV","lodash.clonedeep":"MkA0"}],"CVMq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("dependency-inject");exports.inject=e.inject,exports.combineStores=e.injectFactory;var t=require("./atom");exports.Atom=t.Atom,require("./debug");var r=require("./event");exports.Event=r.Event;var o=require("./global-state");exports.globalState=o.globalState;var s=require("./observer");exports.Action=s.Action,exports.isObservable=s.isObservable,exports.observable=s.observable,exports.observe=s.observe,exports.Static=s.Static;var a=require("./reaction");exports.Reaction=a.Reaction;var i=require("./utils");exports.cancelStrict=i.cancelStrict,exports.startDebug=i.startDebug,exports.stopDebug=i.stopDebug,exports.useStrict=i.useStrict;var c=o.globalState.event;exports.dobEvent=c;
},{"dependency-inject":"wFOm","./atom":"DBzx","./debug":"KvOL","./event":"j0dH","./global-state":"FNcV","./observer":"mhC7","./reaction":"itUD","./utils":"KpaV"}],"IwFA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.state=void 0;var o=require("dob"),e=(0,o.observable)({panzoom:{maxZoom:1,minZoom:.1,initialZoom:.5,zoomDoubleClickSpeed:1,bounds:!0,boundsPadding:.1,smoothScroll:!0},drawAreaScale:100,imageSrc:"file50x50.gif",currentColor:void 0,availableColors:{},paintedColors:{}});exports.state=e;
},{"dob":"CVMq"}],"H99C":[function(require,module,exports) {
"use strict";var e=c(require("panzoom")),t=require("./common/validate"),a=require("./common/color"),r=require("./common/canvas"),o=require("./state"),n=require("dob");function c(e){return e&&e.__esModule?e:{default:e}}function l(e,a){(0,t.isTouchDevice)()?e.addEventListener("touchend",a):e.addEventListener("mouseup",a)}function s(){var t=i(),a=(0,r.getContext)("viewport"),n=(0,r.getContext)("result"),c=(0,r.getContext)("drawArea"),s=(0,e.default)(c.canvas,o.state.panzoom);t.onload=function(){a.canvas.width=t.width,a.canvas.height=t.height,a.drawImage(t,0,0),n.canvas.width=t.width,n.canvas.height=t.height,c.canvas.width=t.width*o.state.drawAreaScale,c.canvas.height=t.height*o.state.drawAreaScale,c.fillStyle="#f9f9f9",c.fillRect(0,0,c.canvas.width,c.canvas.height),o.state.availableColors=(0,r.getColorList)(a,c,o.state.drawAreaScale),o.state.paintedColors=Object.assign({},o.state.availableColors)},l(c.canvas,function(e){var t=u((0,r.getEventPosition)(c.canvas,e),a,s),o=(0,r.getColorAtPos)(a,t);e.shiftKey?(0,r.forEachPixel)(a,function(e,t,r){return r===o&&h({x:e,y:t},o,a,c,n)}):h(t,o,a,c,n)})}function i(){var e=new Image;return e.src=o.state.imageSrc,e.crossOrigin="anonymous",e.onerror=function(){console.error("could not load image")},e}function d(e){var t=e.availableColors,r=e.paintedColors,n=e.currentColor,c=document.getElementById("colorselect");if(!c)return null;c.innerHTML="",Object.keys(t).forEach(function(e,s){var i=r[e]===t[e]?0:(t[e]-r[e])/t[e]*100,d=document.createElement("div"),u=document.createElement("div");d.style.background=e,d.style.color=(0,a.getContrast50)(e),d.innerHTML=100===Math.floor(i)?"✅":"".concat(s+1),d.dataset.painted=i,d.title="".concat(Math.floor(i),"% done"),u.style.height="".concat(100-Math.floor(i),"%"),n===e&&(d.className="selected"),l(d,function(){o.state.currentColor=e}),0!==s||o.state.currentColor||(o.state.currentColor=e),d.appendChild(u),c.appendChild(d)})}function u(e,t,a){var r=e.x,n=e.y,c=a.getTransform().scale;return{x:Math.ceil(r/c/o.state.drawAreaScale)-1,y:Math.ceil(n/c/o.state.drawAreaScale)-1}}function h(e,t,a,n,c){var l=e.x,s=e.y,i=(0,r.getColorAtPos)(n,{x:l*o.state.drawAreaScale+o.state.drawAreaScale/2,y:s*o.state.drawAreaScale+o.state.drawAreaScale/2});o.state.currentColor===t&&i!==t&&(n.fillStyle=t,n.fillRect(l*o.state.drawAreaScale,s*o.state.drawAreaScale,o.state.drawAreaScale,o.state.drawAreaScale),c.fillStyle=t,c.fillRect(l,s,1,1),o.state.paintedColors[t]-=1)}(0,n.observe)(function(){d(o.state)}),document.addEventListener("DOMContentLoaded",s);
},{"panzoom":"cUtF","./common/validate":"ducL","./common/color":"T4d9","./common/canvas":"uIiv","./state":"IwFA","dob":"CVMq"}]},{},["H99C"], null)
//# sourceMappingURL=src.87041de4.js.map